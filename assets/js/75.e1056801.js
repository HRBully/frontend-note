(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{684:function(t,s,a){"use strict";a.r(s);var n=a(17),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"模块化📦"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块化📦"}},[t._v("#")]),t._v(" 模块化📦")]),t._v(" "),a("p",[t._v("在我们刚刚踏入前端学习的时候，仅仅需要"),a("code",[t._v("index.html")]),t._v("里面用"),a("code",[t._v("script")]),t._v("标签和"),a("code",[t._v("style")]),t._v("标签就能构建出一个效果不错的前端页面，当然这仅仅只是一个前端页面，又或者叫网页设计，但是当我们逐渐开始写一个登录功能，一个网易云音乐播放器，一个简单的前端端分离系统，接触到了"),a("code",[t._v("vue-cli")]),t._v("......，其实这是大部分前端人的学习脚步。")]),t._v(" "),a("p",[t._v("回首看来，你发没发现什么？是的，在这个过程中，随着工程规模的扩大，我们增进了一个又一个"),a("code",[t._v("js")]),t._v("，"),a("code",[t._v("css")]),t._v("文件，而大量的这些资源文件，是不是会引起"),a("strong",[t._v("命名冲突")]),t._v("啊，比如说在"),a("code",[t._v("css")]),t._v("中我们在不同的文件中为相同选择器添加了不同的样式，在"),a("code",[t._v("js")]),t._v("中声明了两个相同名字的函数。于是乎，在2010年，石破天惊！前端模块化应运而生。而模块化具有四个特性：")]),t._v(" "),a("ul",[a("li",[t._v("模块化具有独立性：一个模块只"),a("strong",[t._v("独立")]),t._v("负责某个功能，只为该功能服务")]),t._v(" "),a("li",[t._v("模块化具有完整性：既然要独立服务于某个功能，那它肯定需要"),a("strong",[t._v("完整")]),t._v("地实现某个功能的分支，即能够完整实现某个功能。（有点小绕口）")]),t._v(" "),a("li",[t._v("模块化具有可依赖性：作为一个模块也需要"),a("strong",[t._v("依赖其他模块")]),t._v("去辅助它完成功能，所以是可依赖的")]),t._v(" "),a("li",[t._v("模块化具有被依赖性：模块之间相互交流，"),a("strong",[t._v("相互依赖")]),t._v("，所以作为一个优秀的模块，既然可以依赖其他模块，那肯定可以被"),a("strong",[t._v("其他模块依赖")]),t._v("。")])]),t._v(" "),a("p",[t._v("而这四个特性造就了模块化"),a("strong",[t._v("可复用性")]),t._v("，"),a("strong",[t._v("可维护性")]),t._v("，"),a("strong",[t._v("避免命名冲突")]),t._v("等优点，下面呢，我们就从到刀耕火种时代的模块化讲起，深入学习"),a("strong",[t._v("javascript模块化方案")])]),t._v(" "),a("h1",{attrs:{id:"刀耕火种的时代🔥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#刀耕火种的时代🔥"}},[t._v("#")]),t._v(" 刀耕火种的时代🔥")]),t._v(" "),a("blockquote",[a("p",[t._v("很久很久以前~")])]),t._v(" "),a("h2",{attrs:{id:"全局函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局函数"}},[t._v("#")]),t._v(" 全局函数")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 冲突啦！")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" b\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/HRBully/Img/main/2.drawio.png",alt:"2.drawio"}})]),t._v(" "),a("p",[t._v("不要小看上面的这段求和函数，它也可以被称作一个模块，我们可以将它封装成全局函数，比如创建一个"),a("code",[t._v("main.js")]),t._v("文件以"),a("code",[t._v("script")]),t._v("的形式引入我们的文档内，以供我们随时使用，但是，如果当我们在其他的"),a("code",[t._v("js")]),t._v("文件中同时也声明了一个同名函数，就会发生命名冲突现象。")]),t._v(" "),a("h2",{attrs:{id:"命名空间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命名空间"}},[t._v("#")]),t._v(" 命名空间")]),t._v(" "),a("p",[t._v("而关于全局函数产生的命名冲突问题，命名空间"),a("code",[t._v("namespace")]),t._v("解决方案能够很好地解决")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("global_1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不会冲突")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("global_2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" b\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("global_1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/HRBully/Img/main/2.drawio%20(2).png",alt:"2.drawio (2)"}})]),t._v(" "),a("p",[t._v("上面就是通过命名空间来实现一个简单的"),a("code",[t._v("storage")]),t._v("模块，说是命名空间，其实就是利用"),a("strong",[t._v("对象的特性")]),t._v("，将对象视一个模块，之后挂载在全局"),a("code",[t._v("window")]),t._v("，通过对象方法的调用来达到目的，相对于全局函数相比，避免了命名冲突，将每个对象作为一个命名空间，可以视作一个模块。")]),t._v(" "),a("h1",{attrs:{id:"正式八经的模块化规范🎯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#正式八经的模块化规范🎯"}},[t._v("#")]),t._v(" 正式八经的模块化规范🎯")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("javascript")]),t._v("模块化一直持续着刀耕火种，直到......")])]),t._v(" "),a("h2",{attrs:{id:"同步模块-commonjs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#同步模块-commonjs"}},[t._v("#")]),t._v(" 同步模块 CommonJs")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("Node.js")]),t._v("能将"),a("code",[t._v("javascript")]),t._v("带到服务端离不开"),a("code",[t._v("CommonJs")]),t._v("模块化规范的诞生，而这也给"),a("strong",[t._v("前端模块化")]),t._v("带来了一场革命，所以说它不是前端但是给前端带来了一场模块化上的革命")])]),t._v(" "),a("h3",{attrs:{id:"commonjs的基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs的基本使用"}},[t._v("#")]),t._v(" CommonJs的基本使用")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// utils.js")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" sum "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3")]),t._v("\n")])])]),a("p",[t._v("上面是一个利用"),a("code",[t._v("CommonJs")]),t._v("实现模块化的例子，我们在"),a("code",[t._v("utils.js")]),t._v("中使用"),a("code",[t._v("module.exports")]),t._v("暴露出一个"),a("code",[t._v("sum")]),t._v("方法，在"),a("code",[t._v("main.js")]),t._v("中使用"),a("code",[t._v("require")]),t._v("命令加载"),a("code",[t._v("utils.js")]),t._v("文件，并解构出"),a("code",[t._v("sum")]),t._v("方法，究其原理，我们来了解一下"),a("code",[t._v("module")]),t._v("与"),a("code",[t._v("require")])]),t._v(" "),a("h3",{attrs:{id:"commonjs的模块化原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs的模块化原理"}},[t._v("#")]),t._v(" CommonJs的模块化原理")]),t._v(" "),a("p",[a("code",[t._v("module")]),t._v("："),a("code",[t._v("module")]),t._v("是"),a("code",[t._v("Node")]),t._v("内置的构造函数"),a("code",[t._v("Module")]),t._v("所创建的实例，有以下几个属性")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("module.id")]),t._v(" 模块的识别符，通常是带有绝对路径的模块文件名")]),t._v(" "),a("li",[a("code",[t._v("module.filename")]),t._v(" 模块的文件名，带有绝对路径")]),t._v(" "),a("li",[a("code",[t._v("module.loaded")]),t._v(" 返回一个布尔值，表示模块是否已经完成加载。")]),t._v(" "),a("li",[a("code",[t._v("module.parent")]),t._v(" 返回一个对象，表示调用该模块的模块。")]),t._v(" "),a("li",[a("code",[t._v("module.children")]),t._v(" 返回一个数组，表示该模块要用到的其他模块。")]),t._v(" "),a("li",[a("code",[t._v("module.exports")]),t._v(" 表示模块对外输出的值。")])]),t._v(" "),a("p",[a("code",[t._v("require")]),t._v("："),a("code",[t._v("require")]),t._v("是"),a("code",[t._v("Node")]),t._v("内置的命令，它可以读入一个"),a("code",[t._v("js")]),t._v("文件并执行它，"),a("strong",[t._v("并且返回"),a("code",[t._v("exports")]),t._v("对象")])]),t._v(" "),a("p",[t._v("理解"),a("code",[t._v("module")]),t._v("与"),a("code",[t._v("require")]),t._v("后，可以明白"),a("code",[t._v("CommonJs")]),t._v("模块化是如何工作的，首先通过"),a("code",[t._v("module")]),t._v("的"),a("code",[t._v("exports")]),t._v("属性将我们需要暴露给外部的变量或方法暴露出去，而"),a("code",[t._v("require")]),t._v("命令通过文件路径，返回来了"),a("code",[t._v("exports")]),t._v("，所以我们可以将我们在模块定义的属性解构出来，甚至上面的代码我们可以这么写："),a("code",[t._v("let sum = require('./utils.js').sum")]),t._v("，但是为了可读性，我们常用的还是解构的写法")]),t._v(" "),a("h2",{attrs:{id:"异步模块-amd与cmd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异步模块-amd与cmd"}},[t._v("#")]),t._v(" 异步模块 AMD与CMD")]),t._v(" "),a("h2",{attrs:{id:"整合通用-umd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#整合通用-umd"}},[t._v("#")]),t._v(" 整合通用 UMD")]),t._v(" "),a("h1",{attrs:{id:"es6-模块化方案🔬"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es6-模块化方案🔬"}},[t._v("#")]),t._v(" "),a("code",[t._v("ES6")]),t._v(" 模块化方案🔬")]),t._v(" "),a("h2",{attrs:{id:"es-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es-module"}},[t._v("#")]),t._v(" ES Module")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// utils.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" sum "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils.js'")]),t._v("\n")])])]),a("p",[a("code",[t._v("ES Module")]),t._v("使用"),a("code",[t._v("export")]),t._v("作为导出命令，"),a("code",[t._v("import")]),t._v("作为导入命令，也可以使用"),a("code",[t._v("export default")]),t._v("指定默认的输出，在使用模块可以直接将其"),a("code",[t._v("import")]),t._v("出来。")]),t._v(" "),a("h2",{attrs:{id:"细说导入-导出的三个姿势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#细说导入-导出的三个姿势"}},[t._v("#")]),t._v(" 细说导入&导出的三个姿势")]),t._v(" "),a("h3",{attrs:{id:"基础的导出-导入姿势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础的导出-导入姿势"}},[t._v("#")]),t._v(" 基础的导出&导入姿势")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// utils.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"猪痞恶霸"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("num")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" b\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("tool "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils.js'")]),t._v("\n")])])]),a("p",[t._v("我们在模块文件中可以使用"),a("code",[t._v("export")]),t._v("来选择导出目标内容，在模块里会有服务于该模块的方法，我们不需要将这个方法导出，只需要将目标方法导出即可，而导出也是对象形式，可以使用"),a("code",[t._v("export { name }")]),t._v("导出一个对象需要导出的方法或值，使用"),a("code",[t._v("export function tool(){}")]),t._v("导出单个方法，两者混合使用皆可")]),t._v(" "),a("h3",{attrs:{id:"默认的导出-导入姿势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#默认的导出-导入姿势"}},[t._v("#")]),t._v(" 默认的导出&导入姿势")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// utils.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("num")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" b\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sum "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" num "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils.js'")]),t._v("\n")])])]),a("p",[t._v("函数的参数可以默认传递，模块的导入导出当然也可以，我们需要"),a("code",[t._v("num")]),t._v("导出一个对象或者单个方法都是可以的，而在导入模块，需要直接使用"),a("code",[t._v("import")]),t._v("导入")]),t._v(" "),a("h3",{attrs:{id:"混合的导出-导入姿势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#混合的导出-导入姿势"}},[t._v("#")]),t._v(" 混合的导出&导入姿势")]),t._v(" "),a("p",[t._v("我们当然可以将以上两种方法混合起来形成一个新的方法")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// utils.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"猪痞恶霸"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" name\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tool "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./demo/try'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./demo/try'")]),t._v("\n")])])]),a("p",[t._v("是的，我们可以在一个模块内使用"),a("code",[t._v("export")]),t._v("与"),a("code",[t._v("export")]),t._v("导出，而在接受模块需要分别地去导入模块")]),t._v(" "),a("p",[t._v("啊，为什么感觉和"),a("code",[t._v("CommonJs")]),t._v("差不多呢，只是将"),a("code",[t._v("module.exports")]),t._v("替换为了"),a("code",[t._v("export")]),t._v("，将"),a("code",[t._v("require")]),t._v("替换为了"),a("code",[t._v("import")]),t._v("，"),a("code",[t._v("ES Module")]),t._v("与"),a("code",[t._v("CommonJs")]),t._v("肯定有很大的区别，我们下面从原理来比较一下这两种模块化方案。")]),t._v(" "),a("h1",{attrs:{id:"es-module与commonjs的比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es-module与commonjs的比较"}},[t._v("#")]),t._v(" ES Module与CommonJs的比较")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("ES Module")]),t._v("，"),a("code",[t._v("CommonJs")]),t._v("，为什么有了"),a("code",[t._v("CommonJs")]),t._v("模块化还要有"),a("code",[t._v("ES Module")])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// CommonJs")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" sum "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ES Module")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" sum "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils.js'")]),t._v("\n")])])]),a("h2",{attrs:{id:"输出的差异"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输出的差异"}},[t._v("#")]),t._v(" 输出的差异")]),t._v(" "),a("ul",[a("li",[t._v("在"),a("code",[t._v("CommonJs")]),t._v("中，输出的是当前模块值的"),a("strong",[t._v("拷贝")])]),t._v(" "),a("li",[t._v("而在"),a("code",[t._v("ES Module")]),t._v("，输出的是"),a("strong",[t._v("引用")])])]),t._v(" "),a("p",[t._v("因为"),a("code",[t._v("CommonJs")]),t._v("输出的是拷贝，所以会将"),a("code",[t._v("module.exports")]),t._v("全部深拷贝到引用模块，并且当原模块的内部发生改变时，已被引用的地方不会发生改变，而"),a("code",[t._v("ES Module")]),t._v("会根据引用模块的需求导入，当原模块内部发生改变，则引入也会发生改变，而两者输出的差异也决定了二者的加载时机的不同")]),t._v(" "),a("h2",{attrs:{id:"加载时机不同"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加载时机不同"}},[t._v("#")]),t._v(" 加载时机不同")]),t._v(" "),a("p",[t._v("因为"),a("code",[t._v("CommonJs")]),t._v("输出的是模块的拷贝也就是"),a("strong",[t._v("对象")]),t._v("，也就是说这个对象可以是动态的，所以我们需要在脚本运行的时候才会去生成，所以"),a("code",[t._v("CommonJs")]),t._v("为运行的时候会加载进去；而"),a("code",[t._v("ES Module")]),t._v("输出的是引用，这个引用是静态的，所以"),a("code",[t._v("ES Module")]),t._v("在编译的时候会将这个引用暴露出去。")]),t._v(" "),a("h2",{attrs:{id:"异步-同步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异步-同步"}},[t._v("#")]),t._v(" 异步&同步")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("CommonJs")]),t._v("是使用"),a("code",[t._v("require")]),t._v("命令加载模块的，而"),a("code",[t._v("require")]),t._v("是同步加载")]),t._v(" "),a("li",[a("code",[t._v("ES Module")]),t._v("是使用"),a("code",[t._v("import")]),t._v("命令加载模块的，而"),a("code",[t._v("import")]),t._v("是异步加载")])])])}),[],!1,null,null,null);s.default=e.exports}}]);