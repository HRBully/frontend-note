(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{738:function(t,a,s){"use strict";s.r(a);var e=s(17),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"理解vue-cli"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#理解vue-cli"}},[t._v("#")]),t._v(" 理解vue-cli")]),t._v(" "),s("p",[t._v("很多开发者都使用过"),s("code",[t._v("vue-cli")]),t._v("，可以通过它来创建"),s("code",[t._v("Vue")]),t._v("的开发环境，但是始终不理解其开发环境的构建是怎么样的，它提供了一个"),s("code",[t._v("vue.config.js")]),t._v("文件，通过修改它来实现自定义配置，但是其根本还是使用"),s("code",[t._v("webpack")]),t._v("来实现的。")]),t._v(" "),s("h2",{attrs:{id:"浅入webpack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浅入webpack"}},[t._v("#")]),t._v(" 浅入webpack")]),t._v(" "),s("p",[t._v("借用官方文档的概念，"),s("code",[t._v("webpack")]),t._v("是一个用于现代 JavaScript 应用程序的 "),s("em",[t._v("静态模块打包工具")]),t._v("，它通过对静态模块之间的依赖进行分析，分割，打包，最后形成打包产物，根据不同环境配置不同的效果。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/HRBully/Img/main/image-20230813131750800.png",alt:"image-20230813131750800"}})]),t._v(" "),s("p",[t._v("通过"),s("code",[t._v("webpack")]),t._v("，项目开发从刀耕火种，到了电气时代，在开发环境，可以通过扩展插件，实现热更新，缓存等功能，提升开发体验；在生产环境，可以通过图片压缩插件，减小静态图片的体积，使用"),s("code",[t._v("SourceMaps")]),t._v("来监控生产环境错误。通过这些功能，现代 JavaScript 应用程序的种种需求也得以实现。")]),t._v(" "),s("h3",{attrs:{id:"webpack基础配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack基础配置"}},[t._v("#")]),t._v(" webpack基础配置")]),t._v(" "),s("ol",[s("li",[t._v("输入输出\n"),s("ul",[s("li",[s("code",[t._v("entry")]),t._v("：指定打包入口文件路径")]),t._v(" "),s("li",[s("code",[t._v("output")]),t._v("：打包后输出产物的存放路径")])])]),t._v(" "),s("li",[t._v("模块处理\n"),s("ul",[s("li",[s("code",[t._v("resolve")]),t._v("：文件解析规则，比如"),s("code",[t._v("@/src")]),t._v("，开发时可以简化文件路径，打包自动添加")]),t._v(" "),s("li",[s("code",[t._v("module")]),t._v("：模块加载规则，相关文件使用不同"),s("code",[t._v("loader")]),t._v("处理")])])]),t._v(" "),s("li",[t._v("扩展插件\n"),s("ul",[s("li",[s("code",[t._v("plugin")]),t._v("：插件是对打包功能进行扩展，比如配置复制的插件")])])]),t._v(" "),s("li",[t._v("后处理\n"),s("ul",[s("li",[s("code",[t._v("optimization")]),t._v("：在"),s("code",[t._v("loader")]),t._v("处理完文件后进行其他操作，如代码混淆，压缩")])])])]),t._v(" "),s("h3",{attrs:{id:"webpack打包流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack打包流程"}},[t._v("#")]),t._v(" webpack打包流程")]),t._v(" "),s("p",[t._v("为了加深大家对"),s("code",[t._v("webpack")]),t._v("配置的基础印象，了解简单的打包流程最为重要，注意这只是很简单理解，后文我会一一解析每一个过程")]),t._v(" "),s("ol",[s("li",[t._v("读取"),s("code",[t._v("webpack.config.js")]),t._v("配置文件")]),t._v(" "),s("li",[t._v("根据配置入口"),s("code",[t._v("entry")]),t._v("通过文件系统读入入口文件，递归解析入口文件内所有模块的依赖关系，并形成"),s("strong",[t._v("依赖图")]),t._v("，图数据结构是一个"),s("strong",[t._v("多对多")]),t._v("的关系，而我们从"),s("strong",[t._v("模块化")]),t._v("角度来思考也确实是这样的")]),t._v(" "),s("li",[t._v("根据配置文件内"),s("code",[t._v("loader")]),t._v("规则，递归依赖图，对不同类型模块进行处理转化")]),t._v(" "),s("li",[t._v("根据依赖图的关系，将互相依赖的模块分割在一起，成为"),s("code",[t._v("chunk")])]),t._v(" "),s("li",[s("code",[t._v("chunk")]),t._v("最后会形成打包产物："),s("code",[t._v("bundel")])]),t._v(" "),s("li",[t._v("根据配置项的"),s("code",[t._v("output")]),t._v("，通过文件系统，输出相关产物")])]),t._v(" "),s("p",[t._v("下面我们进入正题：搭建"),s("code",[t._v("Vue")]),t._v("开发环境，")]),t._v(" "),s("h2",{attrs:{id:"开始"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[t._v("#")]),t._v(" 开始")]),t._v(" "),s("p",[t._v("开始正文，首先我们先来分析一下具体需求")]),t._v(" "),s("h3",{attrs:{id:"配置需求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置需求"}},[t._v("#")]),t._v(" 配置需求")]),t._v(" "),s("ol",[s("li",[t._v("环境分为生产环境与开发环境")]),t._v(" "),s("li",[t._v("技术选用"),s("code",[t._v("Typescript")]),t._v("，"),s("code",[t._v("Vue")]),t._v("，"),s("code",[t._v("Sass")]),t._v("，"),s("code",[t._v("VueRouter")]),t._v("，"),s("code",[t._v("Vuex")])])]),t._v(" "),s("h3",{attrs:{id:"初始环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始环境"}},[t._v("#")]),t._v(" 初始环境")]),t._v(" "),s("p",[t._v("新建项目文件夹，初始化项目")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("npm init\n")])])]),s("p",[t._v("安装"),s("code",[t._v("webpack")]),t._v("，"),s("code",[t._v("webpack-cli")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("npm install webpack webpack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cli "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),s("p",[t._v("在根目录下新建"),s("code",[t._v("build")]),t._v("文件夹，在此文件夹下面新建"),s("code",[t._v("webpack.common.js")]),t._v("，"),s("code",[t._v("webpack.dev.js")]),t._v("，"),s("code",[t._v("webpack.prod.js")]),t._v("，三个配置文件，分别对应通用，开发与生产环境")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/HRBully/Img/main/image-20230822185707631.png",alt:"image-20230822185707631"}})]),t._v(" "),s("p",[t._v("为了使打包根据不同环境来灵活地改变，所以分为三个打包配置文件，最后通过"),s("code",[t._v("merge")]),t._v("来实现配置复用，首先安装"),s("code",[t._v("webpack-merge")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("npm i webpack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("merge "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.common.js")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.dev.js webpack.prod.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" merge "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-merge'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" common "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./webpack.common'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("merge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"通用配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通用配置"}},[t._v("#")]),t._v(" 通用配置")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../src/main.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../dist'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("clean")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("在根目录下创建"),s("code",[t._v("src")]),t._v("文件夹，在该文件夹下创建入口文件"),s("code",[t._v("main.js")]),t._v("，同时配置输出文件目录"),s("code",[t._v("dist")])]),t._v(" "),s("h3",{attrs:{id:"配置typescript开发环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置typescript开发环境"}},[t._v("#")]),t._v(" 配置Typescript开发环境")]),t._v(" "),s("h3",{attrs:{id:"配置vue开发环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置vue开发环境"}},[t._v("#")]),t._v(" 配置Vue开发环境")]),t._v(" "),s("h3",{attrs:{id:"配置css开发环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置css开发环境"}},[t._v("#")]),t._v(" 配置CSS开发环境")]),t._v(" "),s("h3",{attrs:{id:"热更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#热更新"}},[t._v("#")]),t._v(" 热更新")]),t._v(" "),s("h3",{attrs:{id:"图片压缩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图片压缩"}},[t._v("#")]),t._v(" 图片压缩")]),t._v(" "),s("h3",{attrs:{id:""}},[s("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])]),t._v(" "),s("h2",{attrs:{id:"深出webpack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#深出webpack"}},[t._v("#")]),t._v(" 深出webpack")]),t._v(" "),s("h3",{attrs:{id:"webpack的生成产物"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack的生成产物"}},[t._v("#")]),t._v(" webpack的生成产物")]),t._v(" "),s("h3",{attrs:{id:"webpack的打包过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack的打包过程"}},[t._v("#")]),t._v(" webpack的打包过程")]),t._v(" "),s("h3",{attrs:{id:"webpack热更新原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack热更新原理"}},[t._v("#")]),t._v(" webpack热更新原理")])])}),[],!1,null,null,null);a.default=r.exports}}]);