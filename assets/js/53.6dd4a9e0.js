(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{663:function(s,t,a){"use strict";a.r(t);var n=a(17),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"顶层对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#顶层对象"}},[s._v("#")]),s._v(" 顶层对象")]),s._v(" "),a("p",[s._v("顶层对象分为两种，一种是在浏览器环境下为"),a("strong",[s._v("window")]),s._v("对象，一种是在Node环境下为"),a("strong",[s._v("global")]),s._v("对象，一般来讲我们可以在全局环境下通过"),a("code",[s._v("this")]),s._v("拿到返回的"),a("strong",[s._v("顶层对象")]),s._v("（ES6中返回的是当前模块），如下"),a("code",[s._v("console.log(this)")]),s._v("拿到浏览器环境下的顶层对象"),a("code",[s._v("window")]),s._v("。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/hogB/Img/main/202207030931169.png",alt:"image-20220703093101131"}})]),s._v(" "),a("h2",{attrs:{id:"关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关系"}},[s._v("#")]),s._v(" 关系")]),s._v(" "),a("p",[s._v("在ES6之前顶层对象的属性和全局变量是等价的。")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" person "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"猪痞恶霸"')]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("person"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// "猪痞恶霸"')]),s._v("\n")])])]),a("p",[s._v("我们声明了一个全局变量，并打印"),a("code",[s._v("window.person")]),s._v("，结果明确表明顶层对象属性与全局变量之间的关系")]),s._v(" "),a("p",[s._v("但是这的情况会出现一些问题，比如由于全局变量可能是顶层对象的属性创造的，而且属性的创造是动态的，所以这就会导致在编译的时候提示变量未声明的问题。")]),s._v(" "),a("h2",{attrs:{id:"关系的改变"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关系的改变"}},[s._v("#")]),s._v(" 关系的改变")]),s._v(" "),a("p",[s._v("ES6新增了声明变量的方式，"),a("code",[s._v("let")]),s._v("，"),a("code",[s._v("const")]),s._v("，如果我们使用这两种声明方式在全局环境下声明变量，他们将不会再等价于顶层对象属性，这就造成了全局属性与顶层对象之间出现了差集。")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" person "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"猪痞恶霸"')]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("person"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// undefined")]),s._v("\n")])])]),a("p",[s._v("结果为"),a("code",[s._v("undefined")]),s._v("，之所以声明未赋值的原因上面也提到过，对象的属性的创造是动态的，所以在"),a("code",[s._v("window.person")]),s._v("的时候就声明了变像在全局声明了person属性。")]),s._v(" "),a("h2",{attrs:{id:"不同环境的顶层对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不同环境的顶层对象"}},[s._v("#")]),s._v(" 不同环境的顶层对象")]),s._v(" "),a("p",[s._v("不同的环境顶层对象也有所不同，所以如果我们想要我们的代码能跑在不同的环境下，那么我们需要做出改变，下面有两种方案")]),s._v(" "),a("h3",{attrs:{id:"使用this代替"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用this代替"}},[s._v("#")]),s._v(" 使用"),a("code",[s._v("this")]),s._v("代替")]),s._v(" "),a("p",[s._v("使用"),a("code",[s._v("this")]),s._v("来代替顶层对象")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("但是这种方法存在着很多弊端，比如说"),a("code",[s._v("this")]),s._v("只能在全局中调用顶层对象，在模块中"),a("code",[s._v("this")]),s._v("返回的是当前所指向的模块。")]),s._v(" "),a("h3",{attrs:{id:"判断赋值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#判断赋值"}},[s._v("#")]),s._v(" 判断赋值")]),s._v(" "),a("p",[s._v("在"),a("strong",[s._v("ES6标准入门第三版第31页")]),s._v("，有这么两个方法，下面分别进行解读")]),s._v(" "),a("h4",{attrs:{id:"三目运算符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三目运算符"}},[s._v("#")]),s._v(" 三目运算符")]),s._v(" "),a("p",[s._v("使用三目运算来进行环境的判断，通过"),a("code",[s._v("typeof window !== 'undefined'")]),s._v("检测变量"),a("code",[s._v("window")]),s._v("存在与否，再通过环境中"),a("code",[s._v("process")]),s._v("，"),a("code",[s._v("require")]),s._v("，"),a("code",[s._v("global")]),s._v("的类型判断")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" window "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'undefined'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" window\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" process "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'object'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" require "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'function'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" global "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'object'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" global\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h4",{attrs:{id:"条件判断"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#条件判断"}},[s._v("#")]),s._v(" 条件判断")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("getGlobal")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" self "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'undefined'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" self "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" window "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'undefined'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" window "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" global "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'undefined'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" global "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);